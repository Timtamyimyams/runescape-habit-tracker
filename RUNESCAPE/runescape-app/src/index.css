@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
  -ms-interpolation-mode: nearest-neighbor;
  -webkit-font-smoothing: none;
  -moz-osx-font-smoothing: grayscale;
}

html, body, #root {
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #000;
  image-rendering: pixelated;
}

body {
  margin: 0;
  font-family: 'Press Start 2P', 'Courier New', monospace;
}

/* Force pixelated/nearest-neighbor scaling on all images and backgrounds */
img, div, button, input {
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
}

/* Level up animation */
@keyframes levelUpBounce {
  0% {
    transform: scale(0.5);
    opacity: 0;
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* XP gain float animation */
@keyframes xpFloat {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -150%) scale(1.2);
  }
}

/* Timer running pulse animation */
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* ==========================================
   ACCESSIBILITY - Reduced Motion Support
   ========================================== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* User-controlled animation pause */
.animations-paused,
.animations-paused *,
.animations-paused *::before,
.animations-paused *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
}

/* ==========================================
   ACCESSIBILITY - Focus Visible States
   ========================================== */
button:focus-visible,
input:focus-visible {
  outline: 2px solid #ffff00;
  outline-offset: 2px;
}

/* OSRS-styled focus for custom buttons */
button:focus-visible {
  box-shadow: 0 0 0 2px #000, 0 0 0 4px #ffff00;
}

/* ==========================================
   TOOLTIP ANIMATION
   ========================================== */
@keyframes tooltipEnter {
  from {
    opacity: 0;
    transform: translate(0, -90%);
  }
  to {
    opacity: 1;
    transform: translate(0, -100%);
  }
}

.skill-tooltip {
  animation: tooltipEnter 0.12s ease-out;
}

/* ==========================================
   MODAL ANIMATIONS
   ========================================== */
@keyframes modalEnter {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(-10px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

@keyframes modalExit {
  from {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
  to {
    opacity: 0;
    transform: scale(0.95) translateY(5px);
  }
}

@keyframes backdropFadeIn {
  from { background: rgba(0,0,0,0); }
  to { background: rgba(0,0,0,0.8); }
}

@keyframes backdropFadeOut {
  from { background: rgba(0,0,0,0.8); }
  to { background: rgba(0,0,0,0); }
}

.modal-backdrop {
  animation: backdropFadeIn 0.2s ease-out forwards;
}

.modal-backdrop-exit {
  animation: backdropFadeOut 0.15s ease-in forwards;
}

.modal-content {
  animation: modalEnter 0.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  will-change: transform, opacity;
}

.modal-content-exit {
  animation: modalExit 0.15s ease-in forwards;
}

/* ==========================================
   COMPLETION FLASH
   ========================================== */
@keyframes completionFlash {
  0% {
    box-shadow: inset 0 0 0 0 rgba(0,255,0,0);
  }
  50% {
    box-shadow: inset 0 0 15px 5px rgba(0,255,0,0.6), 0 0 10px rgba(0,255,0,0.4);
  }
  100% {
    box-shadow: inset 0 0 0 0 rgba(0,255,0,0);
  }
}

.completion-flash {
  animation: completionFlash 0.3s ease-out;
}

/* ==========================================
   TIMER TOGGLE PULSE
   ========================================== */
@keyframes timerToggle {
  0% { transform: scale(1); }
  50% { transform: scale(1.08); }
  100% { transform: scale(1); }
}

.timer-toggle {
  animation: timerToggle 0.25s ease-out;
}

/* ==========================================
   FOCUS WINDOW SLIDE
   ========================================== */
@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideOutRight {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(30px);
  }
}

.focus-window {
  animation: slideInRight 0.2s ease-out forwards;
}

.focus-window-exit {
  animation: slideOutRight 0.15s ease-in forwards;
}

/* ==========================================
   XP BAR SHIMMER
   ========================================== */
@keyframes xpBarShimmer {
  0% {
    left: -100%;
  }
  100% {
    left: 200%;
  }
}

.xp-bar-shimmer::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255,255,255,0.4) 50%,
    transparent 100%
  );
  animation: xpBarShimmer 0.5s ease-out forwards;
}

/* ==========================================
   HEATMAP CELL FADE
   ========================================== */
@keyframes cellFadeIn {
  from {
    opacity: 0;
    transform: scale(0.5);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.heatmap-cell {
  animation: cellFadeIn 0.3s ease-out backwards;
}

/* ==========================================
   STREAK MILESTONE CELEBRATION
   ========================================== */
@keyframes milestoneEnter {
  0% {
    opacity: 0;
    transform: scale(0.5) rotate(-10deg);
  }
  50% {
    transform: scale(1.1) rotate(5deg);
  }
  100% {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

@keyframes milestoneGlow {
  0%, 100% {
    box-shadow: 0 0 20px rgba(255,215,0,0.5), inset 0 0 10px rgba(255,215,0,0.2);
  }
  50% {
    box-shadow: 0 0 40px rgba(255,215,0,0.8), inset 0 0 20px rgba(255,215,0,0.4);
  }
}

@keyframes starBurst {
  0% {
    transform: scale(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: scale(2) rotate(180deg);
    opacity: 0;
  }
}

.milestone-popup {
  animation: milestoneEnter 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards,
             milestoneGlow 1s ease-in-out infinite;
}

/* ==========================================
   PARTICLE EFFECTS
   ========================================== */
@keyframes particleFloat {
  0% {
    opacity: 1;
    transform: translate(0, 0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(var(--tx, 0), var(--ty, -50px)) scale(0.5);
  }
}

@keyframes sparkle {
  0%, 100% {
    opacity: 0;
    transform: scale(0);
  }
  50% {
    opacity: 1;
    transform: scale(1);
  }
}

.particle {
  position: absolute;
  pointer-events: none;
  animation: particleFloat 0.8s ease-out forwards;
}

.sparkle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: #ffff00;
  border-radius: 50%;
  animation: sparkle 0.6s ease-in-out;
}

/* ==========================================
   PERFORMANCE OPTIMIZATIONS
   ========================================== */
.modal-content,
.xp-popup,
.level-up-popup {
  will-change: transform, opacity;
}

.heatmap-cell {
  content-visibility: auto;
  contain-intrinsic-size: 5px 5px;
}

/* ==========================================
   SCREEN SHAKE - Level Up Effect
   ========================================== */
@keyframes screenShake {
  0%, 100% { transform: translateX(0); }
  10% { transform: translateX(-4px) rotate(-0.5deg); }
  20% { transform: translateX(4px) rotate(0.5deg); }
  30% { transform: translateX(-3px) rotate(-0.3deg); }
  40% { transform: translateX(3px) rotate(0.3deg); }
  50% { transform: translateX(-2px) rotate(-0.2deg); }
  60% { transform: translateX(2px) rotate(0.2deg); }
  70% { transform: translateX(-1px) rotate(-0.1deg); }
  80% { transform: translateX(1px) rotate(0.1deg); }
  90% { transform: translateX(0); }
}

.screen-shake {
  animation: screenShake 0.4s ease-out;
}

/* ==========================================
   DANGER SHAKE - Delete Warning
   ========================================== */
@keyframes dangerShake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
  20%, 40%, 60%, 80% { transform: translateX(3px); }
}

.danger-shake {
  animation: dangerShake 0.5s ease-out;
}

/* ==========================================
   GENTLE WIGGLE - Incomplete Habit Reminder
   ========================================== */
@keyframes gentleWiggle {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-2deg); }
  75% { transform: rotate(2deg); }
}

.gentle-wiggle {
  animation: gentleWiggle 0.5s ease-in-out;
}

.incomplete-wiggle {
  animation: gentleWiggle 0.6s ease-in-out infinite;
  animation-delay: var(--wiggle-delay, 0s);
}

/* ==========================================
   RIPPLE EFFECT - Success Actions
   ========================================== */
@keyframes ripple {
  0% {
    transform: scale(0);
    opacity: 0.6;
  }
  100% {
    transform: scale(2.5);
    opacity: 0;
  }
}

.ripple-container {
  position: relative;
  overflow: hidden;
}

.ripple-effect {
  position: absolute;
  border-radius: 50%;
  background: rgba(0, 255, 0, 0.4);
  animation: ripple 0.6s ease-out forwards;
  pointer-events: none;
}

/* ==========================================
   INPUT FOCUS STYLING
   ========================================== */
input[type="text"]:focus {
  outline: none;
  border-color: #ff981f !important;
  box-shadow: 0 0 0 1px #ff981f, inset 0 0 8px rgba(255, 152, 31, 0.2);
}

input[type="text"]::placeholder {
  color: #5a5040;
  opacity: 1;
}

/* ==========================================
   PROGRESS RING - Total Level Counter
   ========================================== */
@keyframes progressRingPulse {
  0%, 100% {
    filter: drop-shadow(0 0 2px rgba(255, 152, 31, 0.5));
  }
  50% {
    filter: drop-shadow(0 0 6px rgba(255, 152, 31, 0.8));
  }
}

.progress-ring {
  animation: progressRingPulse 2s ease-in-out infinite;
}

.progress-ring-circle {
  transition: stroke-dashoffset 0.5s ease-out;
  transform: rotate(-90deg);
  transform-origin: 50% 50%;
}

/* ==========================================
   UPDATED PULSE - Slower for running timers
   ========================================== */
@keyframes pulseSlow {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.pulse-slow {
  animation: pulseSlow 1.5s ease-in-out infinite;
}
